# IM 即时通讯用户指南

## 发起单聊的三种方式

### 1. 从通讯录发起单聊 ⭐️ 推荐

1. 打开应用，点击首页的"通讯录"快捷入口，或从底部导航进入通讯录页面
2. 找到要联系的人，点击该联系人卡片
3. 在弹出的操作菜单中选择"发送私信"
4. 自动创建单聊会话并跳转到聊天页面

**优势**：
- 最自然的交互方式
- 可以看到联系人的详细信息（角色、电话等）
- 支持搜索和按首字母快速定位

### 2. 从用户详情页发起单聊 ⭐️ 推荐

1. 在任何可以查看用户详情的地方（如项目成员列表、评论作者等）点击用户
2. 进入用户详情页面后，点击"发送私信"按钮
3. 自动创建单聊会话并跳转到聊天页面

**优势**：
- 可以直接从用户信息页面发起
- 适合从其他功能模块（如项目详情）快速联系相关人员
- 查看完整的用户资料后再决定是否联系

### 3. 从会话列表发起单聊

1. 点击底部导航栏的"聊天"图标
2. 点击右上角的"+"按钮
3. 选择"发起单聊"
4. 系统会自动跳转到通讯录页面，让你选择联系人

**说明**：
- 这种方式最终也是通过通讯录来选择联系人
- 适合已经在聊天页面的场景

## 聊天功能说明

### 基本功能
- ✅ 发送文本消息
- ✅ 查看历史消息
- ✅ 消息状态显示（发送中、已发送、失败）
- ✅ 未读消息统计
- ✅ 消息时间显示

### 即将支持的功能
- 🚧 发送图片
- 🚧 发送文件
- 🚧 群聊功能
- 🚧 消息撤回
- 🚧 @提醒功能

## 技术架构

### WebSocket 实时通讯
- 建立长连接实现消息实时推送
- 自动心跳保活机制
- 断线自动重连（最多重连10次）

### 离线消息同步
- 基于 `seq` 序号的消息同步机制
- 应用重启后自动拉取离线消息
- 保证消息不丢失

### 本地存储
- 使用 SQLite 存储会话和消息
- 支持离线查看历史消息
- 优化网络请求，提升加载速度

## 常见问题

### Q: 如何知道对方是否已读消息？
A: 目前暂不支持已读回执功能，将在后续版本中添加。

### Q: 如何删除会话？
A: 目前暂不支持删除会话功能，将在后续版本中添加。

### Q: 消息发送失败怎么办？
A: 点击失败的消息可以重试发送。如果持续失败，请检查网络连接。

### Q: 如何创建群聊？
A: 群聊功能正在开发中，将在后续版本中开放。

## 更新日志

### v1.0.0 (当前版本)
- ✅ 基础单聊功能
- ✅ WebSocket 实时通讯
- ✅ 离线消息同步
- ✅ 从通讯录/用户详情页发起单聊
- ✅ 会话列表管理
- ✅ 消息历史记录

### 计划中的功能
- 📅 图片和文件消息
- 📅 群聊功能
- 📅 消息撤回
- 📅 已读回执
- 📅 会话删除
- 📅 消息搜索
- 📅 消息转发

